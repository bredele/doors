!function(){function a(b){var c=a.modules[b];if(!c)throw new Error('failed to require "'+b+'"');return c.definition&&(c.client=c.component=!0,c.definition.call(this,c.exports={},c),delete c.definition),c.exports}a.modules={},a.register=function(b,c){a.modules[b]={definition:c}},a.define=function(b,c){a.modules[b]={exports:c}},a.register("component~emitter@1.1.2",function(a,b){function c(a){return a?d(a):void 0}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}b.exports=c,c.prototype.on=c.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},c.prototype.once=function(a,b){function d(){c.off(a,d),b.apply(this,arguments)}var c=this;return this._callbacks=this._callbacks||{},d.fn=b,this.on(a,d),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length}}),a.register("component~indexof@0.0.3",function(a,b){b.exports=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}}),a.register("doors",function(b,c){function f(a,b){var c=b||[];this.name=a,this.keys=[],this.locks={};for(var d=c.length;d--;)this.add(c[d])}var d=a("component~emitter@1.1.2"),e=a("component~indexof@0.0.3");c.exports=f,d(f.prototype),f.prototype.has=function(a){return!!~e(this.keys,a)},f.prototype.add=function(a){if(!this.has(a)){var b=a;if(a instanceof f){var c=this;b=a.name,a.on("open",function(){c.unlock(b)})}this.locks[b]=a,this.keys.push(b)}},f.prototype.lock=function(){var a=arguments.length;if(a)for(var b=a;b--;){var c=arguments[b];if(this.locks[c]&&!this.has(c)){var d=this.locks[c];d instanceof f&&d.lock(),this.keys.push(c)}}else Object.keys(this.locks).length&&this.lock.apply(this,Object.keys(this.locks))},f.prototype.unlock=function(){var a=arguments.length;if(a)for(var b=a;b--;){var c=arguments[b];if(this.has(c)){var d=this.locks[c];this.keys.splice(e(this.keys,c),1),d instanceof f&&d.unlock(),this.open()}}else this.keys.length&&this.unlock.apply(this,this.keys)},f.prototype.toggle=function(a,b){b?this.unlock(a):this.lock(a)},f.prototype.open=function(){return this.keys.length?!1:(this.emit("open"),!0)}}),"object"==typeof exports?module.exports=a("doors"):"function"==typeof define&&define.amd?define([],function(){return a("doors")}):this.doors=a("doors")}();